{
  "version": 3,
  "sources": ["../../../ARCHIVIST/routes/adapters/wa_adapter.mjs", "../../../ARCHIVIST/routes/shared_review.mjs", "../../../ARCHIVIST/routes/review.mjs", "../../../ARCHIVIST/routes/ingest.mjs", "../../../ARCHIVIST/routes/lineage.mjs", "../../../ARCHIVIST/routes/promote.mjs", "../../../ARCHIVIST/routes/review_promote_selected.mjs", "../../../ARCHIVIST/routes/export.mjs", "../../../ARCHIVIST/routes/rollback.mjs", "../../../ARCHIVIST/routes/debug_get.mjs", "../../../ARCHIVIST/routes/debug_hash_compare.mjs", "../../../worker.mjs", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-z7PU2V/middleware-insertion-facade.js", "../../../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-z7PU2V/middleware-loader.entry.ts"],
  "sourceRoot": "C:\\Users\\isaac\\OneDrive\\Documents\\GitHub\\Worldforge-data\\.wrangler\\tmp\\dev-cGFuEY",
  "sourcesContent": ["// ARCHIVIST/routes/adapters/wa_adapter.mjs\n// Minimal World Anvil adapter: normalizes WA-like JSON to proposals.\nexport function parseWA(json) {\n  // Expected shape (simplified):\n  // { articles: [{ id, title, slug, type, updated_at }], characters: [...], locations: [...] }\n  const proposals = [];\n  let total = 0, matched = 0, isNew = 0;\n  if (!json || typeof json !== 'object') return { proposals, totals: { total, matched, isNew } };\n\n  const push = (entity_type, arr=[]) => {\n    for (const it of (arr || [])) {\n      total += 1;\n      const slug = (it.slug || safeSlug(it.title || it.name || `wa-${entity_type}-${total}`)).toLowerCase();\n      proposals.push({\n        slug,\n        entity_type,\n        tier_suggested: 2,              // External Canon by default\n        confidence: \"medium\",\n        status: \"new\",                   // Without KV lookup we mark as 'new'\n        conflicts_with: [],\n        delta_summary: it.title || it.name || slug,\n        promotion_readiness: 0.6\n      });\n      isNew += 1;\n    }\n  };\n\n  push(\"article\", json.articles);\n  push(\"character\", json.characters);\n  push(\"location\", json.locations);\n  push(\"faction\", json.factions);\n  push(\"item\", json.items);\n  push(\"event\", json.events);\n  push(\"other\", json.other);\n\n  return { proposals, totals: { total, matched, isNew } };\n}\n\nfunction safeSlug(s) {\n  return String(s).trim().toLowerCase().replace(/[^a-z0-9_-]+/g,'-').replace(/^-+|-+$/g,'');\n}\n", "// ARCHIVIST/routes/shared_review.mjs\nimport { parseWA } from './adapters/wa_adapter.mjs';\n\nexport async function makeReviewPacket(source_uri, adapter, body = {}){\n  const now = new Date().toISOString();\n  let proposals = [];\n  let totals = { total: 0, isNew: 0, matched: 0 };\n\n  if ((adapter === 'wa' || adapter === 'worldanvil') && body.wa_json) {\n    try {\n      const parsed = typeof body.wa_json === 'string' ? JSON.parse(body.wa_json) : body.wa_json;\n      const out = parseWA(parsed);\n      proposals = out.proposals;\n      totals = { total: out.totals.total, isNew: out.totals.isNew, matched: out.totals.matched };\n    } catch (e) {\n      // fall back to empty analyzer if JSON invalid\n    }\n  }\n\n  return {\n    review_id: cryptoRandomId(),\n    source_uri,\n    source_adapter: adapter,\n    scan_summary: { entities_total: totals.total, entities_new: totals.isNew, entities_matched: totals.matched },\n    proposals,\n    gaps: [],\n    duplicates: [],\n    conflicts: [],\n    recommendations: proposals.length ? [\"Review proposals and promote selected\"] : [\"No-op: analyzer stub\"],\n    est_effort: { ops_review_minutes: Math.max(1, Math.ceil((proposals.length || 1)/25)), merge_complexity: proposals.length>50 ? \"med\" : \"low\" },\n    generated_at: now\n  };\n}\n\nfunction cryptoRandomId(){\n  const arr = new Uint8Array(12);\n  crypto.getRandomValues(arr);\n  return btoa(String.fromCharCode(...arr)).replace(/[/+=]/g,\"\").slice(0,16);\n}\n", "// Prospect Mode \u2014 non-destructive review of large sources\nimport { makeReviewPacket } from './shared_review.mjs';\nexport const onRequestPost = async (ctx) => {\n  const body = await ctx.request.json().catch(()=>({}));\n  const pkt = await makeReviewPacket(body.source_uri || \"unknown\", body.adapter || \"wa\", body);\n  return new Response(JSON.stringify(pkt), { headers: { \"content-type\":\"application/json\" }});\n};\n", "// Ingest (WA) \u2014 supports dry_run to return Review Packet without writes\nimport { makeReviewPacket } from './shared_review.mjs';\nexport const onRequestPost = async (ctx) => {\n  const url = new URL(ctx.request.url);\n  const dry = url.searchParams.get(\"dry_run\") === \"true\";\n  const body = await ctx.request.json().catch(()=>({}));\n  if (dry) {\n    const pkt = await makeReviewPacket(body.source_uri || \"unknown\", body.adapter || \"wa\", body);\n    return new Response(JSON.stringify(pkt), { headers: { \"content-type\":\"application/json\" }});\n  }\n  return new Response(JSON.stringify({ ok:true, staged:true, count:0 }), { headers: { \"content-type\":\"application/json\" }});\n};\n", "// ARCHIVIST/routes/lineage.mjs\n// Canonical lineage helpers and stable hashing for Archivist v3.3.x\n\nexport function baseForHash(entry) {\n  const e = JSON.parse(JSON.stringify(entry || {}));\n  delete e.canon_hash_v1;\n  delete e.promoted_at;\n  if (e.lineage && typeof e.lineage === 'object' && 'last_hash' in e.lineage) {\n    const { last_hash, ...rest } = e.lineage;\n    e.lineage = rest;\n  }\n  return e;\n}\n\nfunction stableStringify(obj) {\n  const seen = new WeakSet();\n  const stringify = (o) => {\n    if (o === null || typeof o !== 'object') return JSON.stringify(o);\n    if (seen.has(o)) throw new TypeError('circular structure');\n    seen.add(o);\n    if (Array.isArray(o)) {\n      return '[' + o.map(v => stringify(v)).join(',') + ']';\n    }\n    const keys = Object.keys(o).sort();\n    const entries = keys.map(k => JSON.stringify(k) + ':' + stringify(o[k]));\n    return '{' + entries.join(',') + '}';\n  };\n  return stringify(obj);\n}\n\nexport async function canonHashV1(obj) {\n  const text = stableStringify(obj);\n  const data = new TextEncoder().encode(text);\n  const digest = await crypto.subtle.digest('SHA-256', data);\n  return Array.from(new Uint8Array(digest)).map(b => b.toString(16).padStart(2, '0')).join('');\n}\n", "// ARCHIVIST/routes/promote.mjs\nimport { canonHashV1, baseForHash } from './lineage.mjs';\n\nexport const onRequestPost = async (ctx) => {\n  const started = Date.now();\n  try {\n    const body = await ctx.request.json().catch(()=>({}));\n    const auth = ctx.request.headers.get('authorization') || '';\n    const token = auth.startsWith('Bearer ') ? auth.slice(7) : '';\n\n    const expected = ctx.env?.OPS_TOKEN || process.env.OPS_TOKEN || '';\n    if (!expected || token !== expected) {\n      return new Response(JSON.stringify({ ok:false, error:'Unauthorized' }), {\n        status: 401, headers: {'content-type':'application/json'}\n      });\n    }\n\n    const useKV = !!(ctx.env?.WF_KV_STAGING && ctx.env?.WF_KV_CANON && ctx.env?.WF_KV_ARCHIVE);\n    const slugs = Array.isArray(body.slugs) ? body.slugs : [];\n    if (!slugs.length) {\n      return new Response(JSON.stringify({ ok:false, error:'Provide slugs[]' }), {\n        status: 400, headers: {'content-type':'application/json'}\n      });\n    }\n\n    const results = [];\n    for (const slug of slugs) {\n      const stagingKey = `archivist/staging/${slug}.json`;\n      let entry;\n\n      if (useKV) {\n        const raw = await ctx.env.WF_KV_STAGING.get(stagingKey, { type: 'text' });\n        if (!raw) { results.push({ slug, status:'missing_in_staging' }); continue; }\n        entry = JSON.parse(raw);\n      } else {\n        entry = {\n          slug, tier: 2, entity_type: 'article',\n          verification_status:'pending', pending_promotion: true, confidence: 'medium',\n          lineage:{ entry_id:`staging:${slug}`, origin:{}, edits:[], merged_from:[], verified_by:[], last_hash:'' },\n          payload: {}, canon_hash_v1: '', _warnings: []\n        };\n      }\n\n      const recomputed = await canonHashV1(baseForHash(entry));\n\n      if (entry.canon_hash_v1 && entry.canon_hash_v1 !== recomputed) {\n        results.push({ slug, status:'hash_mismatch', expected:entry.canon_hash_v1, got:recomputed });\n        continue;\n      }\n\n      entry.canon_hash_v1 = recomputed;\n      entry.verification_status = 'verified';\n      entry.pending_promotion = false;\n      entry.promoted_at = new Date().toISOString();\n\n      if (useKV) {\n        const canonKey = `archivist/canon/${slug}.json`;\n        const oldCanon = await ctx.env.WF_KV_CANON.get(canonKey, { type:'text' });\n        if (oldCanon) {\n          const archiveKey = `archivist/archive/${slug}.${Date.now()}.json`;\n          await ctx.env.WF_KV_ARCHIVE.put(archiveKey, oldCanon);\n        }\n        await ctx.env.WF_KV_CANON.put(canonKey, JSON.stringify(entry));\n        await ctx.env.WF_KV_STAGING.delete(stagingKey);\n        results.push({ slug, status:'promoted', canonKey });\n      } else {\n        results.push({ slug, status:'promoted (simulated)' });\n      }\n    }\n\n    return new Response(JSON.stringify({ ok:true, results, ms: (Date.now()-started) }), {\n      headers: { 'content-type':'application/json' }\n    });\n  } catch (err) {\n    return new Response(JSON.stringify({ ok:false, error:String(err) }), {\n      status: 500, headers: { 'content-type':'application/json' }\n    });\n  }\n};\n", "// ARCHIVIST/routes/review_promote_selected.mjs\nimport { canonHashV1, baseForHash } from './lineage.mjs';\n\nconst SLUG_RE = /^[a-z0-9_-]+$/;\n\nexport const onRequestPost = async (ctx) => {\n  try {\n    const body = await ctx.request.json().catch(()=>({}));\n    const slugs = Array.isArray(body.slugs) ? body.slugs : [];\n    const target_tier = Number(body.target_tier ?? 2);\n    const notes = typeof body.notes === 'string' ? body.notes : '';\n    const review_id = body.review_id || null;\n\n    const audit = { warnings: [], errors: [] };\n    if (!slugs.length) audit.errors.push('Body.slugs must be a non-empty array.');\n    if (![1,2].includes(target_tier)) audit.errors.push('target_tier must be 1 or 2.');\n\n    const uniq = [];\n    const dupes = [];\n    const invalid = [];\n    for (const s of slugs) {\n      if (typeof s !== 'string' || !SLUG_RE.test(s)) { invalid.push(s); continue; }\n      if (uniq.includes(s)) dupes.push(s); else uniq.push(s);\n    }\n    if (invalid.length) audit.warnings.push(`Invalid slugs filtered: ${invalid.join(', ')}`);\n    if (dupes.length) audit.warnings.push(`Duplicate slugs ignored: ${dupes.join(', ')}`);\n\n    if (audit.errors.length) {\n      return new Response(JSON.stringify({ ok:false, review_id, errors: audit.errors, warnings: audit.warnings }), {\n        status: 400, headers: { 'content-type':'application/json' }\n      });\n    }\n\n    const useKV = !!(ctx.env && ctx.env.WF_KV_STAGING);\n    const staged = [];\n\n    for (const slug of uniq) {\n      const now = new Date().toISOString();\n\n      const entry = {\n        slug,\n        entity_type: 'article',\n        tier: target_tier,\n        source_type: target_tier === 1 ? 'internal' : 'external',\n        verification_status: 'pending',\n        pending_promotion: true,\n        confidence: target_tier === 1 ? 'high' : 'medium',\n        archived_version: false,\n        lineage: {\n          entry_id: `staging:${slug}`,\n          origin: { source: 'External', tier: target_tier, author: 'ArchivistReview', timestamp: now, signature: '' },\n          edits: [],\n          merged_from: [],\n          verified_by: [],\n          last_hash: ''\n        },\n        payload: {}\n      };\n\n      (entry._warnings ||= []);\n\n      const basis = baseForHash(entry);\n      entry.canon_hash_v1 = await canonHashV1(basis);\n      entry.lineage.last_hash = entry.canon_hash_v1;\n\n      const key = `archivist/staging/${slug}.json`;\n      if (useKV) {\n        await ctx.env.WF_KV_STAGING.put(key, JSON.stringify(entry));\n        staged.push({ slug, target_tier, staged_to: 'WF_KV_STAGING', key, _warnings: entry._warnings || [] });\n      } else {\n        staged.push({ slug, target_tier, staged_to: 'WF_KV_STAGING (simulated)', key, _warnings: entry._warnings || [] });\n      }\n    }\n\n    return new Response(JSON.stringify({\n      ok: true,\n      review_id,\n      target_tier,\n      notes,\n      staged_count: staged.length,\n      staged,\n      audit\n    }), { headers: { 'content-type':'application/json' }});\n  } catch (err) {\n    return new Response(JSON.stringify({ ok:false, error: String(err) }), {\n      status: 500, headers: { 'content-type':'application/json' }\n    });\n  }\n};\n", "// Export index for Hub/DM \u2014 supports filters: tier, archived, q\nexport const onRequestGet = async (ctx) => {\n  const url = new URL(ctx.request.url);\n  const tier = url.searchParams.get('tier');\n  const archived = url.searchParams.get('archived') === 'true';\n  const q = url.searchParams.get('q') || '';\n  // TODO: query KV; currently stub\n  return new Response(JSON.stringify({ ok:true, results:[], filters:{ tier, archived, q } }), { headers: { \"content-type\":\"application/json\" }});\n};\n", "// Rollback / Deprecate / Restore \u2014 stubs\nexport const onRequestPost = async (ctx) => {\n  // TODO: implement rollback workflows and Control Log hooks\n  return new Response(JSON.stringify({ ok:true, action:\"noop\" }), { headers: { \"content-type\":\"application/json\" }});\n};\n", "// ARCHIVIST/routes/debug_get.mjs\n// DEV-ONLY: fetch a KV entry by store & slug, e.g. /archivist/debug/get?store=canon&slug=vaelthirathil\nexport const onRequestGet = async (ctx) => {\n  const url = new URL(ctx.request.url);\n  const store = url.searchParams.get(\"store\");   // \"staging\" | \"canon\" | \"archive\"\n  const slug  = url.searchParams.get(\"slug\");\n  if (!store || !slug) return new Response(JSON.stringify({ ok:false, error:\"store & slug required\" }), { status:400 });\n  const map = {\n    staging: ctx.env?.WF_KV_STAGING,\n    canon:   ctx.env?.WF_KV_CANON,\n    archive: ctx.env?.WF_KV_ARCHIVE\n  };\n  const kv = map[store];\n  if (!kv) return new Response(JSON.stringify({ ok:false, error:`unknown store: ${store}` }), { status:400 });\n  const key = `archivist/${store}/${slug}.json`;\n  const raw = await kv.get(key, { type:\"text\" });\n  if (!raw) return new Response(JSON.stringify({ ok:false, error:\"not found\", key }), { status:404 });\n  return new Response(raw, { headers: { \"content-type\":\"application/json\" }});\n};\n", "// ARCHIVIST/routes/debug_hash_compare.mjs\nimport { canonHashV1, baseForHash } from './lineage.mjs';\n\nexport const onRequestGet = async (ctx) => {\n  const url = new URL(ctx.request.url);\n  const store = url.searchParams.get('store') || 'staging';\n  const slug  = url.searchParams.get('slug');\n  if (!slug) return new Response(JSON.stringify({ ok:false, error:'slug required' }), { status:400 });\n\n  const map = {\n    staging: ctx.env?.WF_KV_STAGING,\n    canon:   ctx.env?.WF_KV_CANON,\n    archive: ctx.env?.WF_KV_ARCHIVE\n  };\n  const kv = map[store];\n  if (!kv) return new Response(JSON.stringify({ ok:false, error:`unknown store: ${store}` }), { status:400 });\n\n  const key = `archivist/${store}/${slug}.json`;\n  const raw = await kv.get(key, { type:'text' });\n  if (!raw) return new Response(JSON.stringify({ ok:false, error:'not found', key }), { status:404 });\n\n  const entry = JSON.parse(raw);\n  const basis = baseForHash(entry);\n  const storedHash = entry.canon_hash_v1 || null;\n  const recomputed = await canonHashV1(basis);\n\n  return new Response(JSON.stringify({\n    ok: true, key,\n    storedHash, recomputed,\n    same: storedHash ? storedHash === recomputed : null\n  }), { headers: { 'content-type':'application/json' }});\n};\n", "// worker.mjs \u2014 Cloudflare Worker entry (Archivist v3.3.x)\nimport * as Review from './ARCHIVIST/routes/review.mjs';\nimport * as Ingest from './ARCHIVIST/routes/ingest.mjs';\nimport * as Promote from './ARCHIVIST/routes/promote.mjs';\nimport * as ReviewPromote from './ARCHIVIST/routes/review_promote_selected.mjs';\nimport * as ExportRoute from './ARCHIVIST/routes/export.mjs';\nimport * as Rollback from './ARCHIVIST/routes/rollback.mjs';\n\nimport * as DebugGet from './ARCHIVIST/routes/debug_get.mjs';\nimport * as DebugHashCompare from './ARCHIVIST/routes/debug_hash_compare.mjs';\n\nexport default {\n  async fetch(request, env, ctx) {\n    const url = new URL(request.url);\n    const method = request.method;\n    const rctx = { request, env, ctx };\n\n    if (url.pathname === '/archivist/review' && method === 'POST') return Review.onRequestPost(rctx);\n    if ((url.pathname === '/archivist/ingest' || url.pathname === '/archivist/ingest/wa') && method === 'POST') return Ingest.onRequestPost(rctx);\n    if (url.pathname === '/archivist/promote' && method === 'POST') return Promote.onRequestPost(rctx);\n    if (url.pathname === '/archivist/review/promote_selected' && method === 'POST') return ReviewPromote.onRequestPost(rctx);\n    if (url.pathname === '/archivist/export/index' && method === 'GET') return ExportRoute.onRequestGet(rctx);\n    if ((url.pathname === '/archivist/rollback' || url.pathname === '/archivist/deprecate' || url.pathname === '/archivist/restore') && method === 'POST') return Rollback.onRequestPost(rctx);\n\n    if (url.pathname === '/archivist/debug/get' && method === 'GET') return DebugGet.onRequestGet(rctx);\n    if (url.pathname === '/archivist/debug/hash_compare' && method === 'GET') return DebugHashCompare.onRequestGet(rctx);\n\n    return new Response(JSON.stringify({ ok:false, error:'Not Found', path:url.pathname, method }), {\n      status: 404, headers: { 'content-type':'application/json' }\n    });\n  }\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\isaac\\\\OneDrive\\\\Documents\\\\GitHub\\\\Worldforge-data\\\\worker.mjs\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\isaac\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\isaac\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\isaac\\\\OneDrive\\\\Documents\\\\GitHub\\\\Worldforge-data\\\\worker.mjs\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\isaac\\\\OneDrive\\\\Documents\\\\GitHub\\\\Worldforge-data\\\\.wrangler\\\\tmp\\\\bundle-z7PU2V\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\isaac\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\isaac\\\\OneDrive\\\\Documents\\\\GitHub\\\\Worldforge-data\\\\.wrangler\\\\tmp\\\\bundle-z7PU2V\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\isaac\\\\OneDrive\\\\Documents\\\\GitHub\\\\Worldforge-data\\\\.wrangler\\\\tmp\\\\bundle-z7PU2V\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["onRequestPost", "onRequestPost", "onRequestPost", "onRequestPost", "onRequestGet", "onRequestGet", "onRequestPost", "onRequestGet"]
}
